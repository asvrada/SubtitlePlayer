(function(t){function e(e){for(var n,s,o=e[0],l=e[1],c=e[2],p=0,d=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,o=1;o<r.length;o++){var l=r[o];0!==i[l]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},i={app:0},a=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0df1":function(t,e,r){"use strict";var n=r("c7fd"),i=r.n(n);i.a},1:function(t,e){},1166:function(t,e,r){"use strict";var n=r("d27e"),i=r.n(n);i.a},2:function(t,e){},2744:function(t,e,r){"use strict";var n=r("c737"),i=r.n(n);i.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("h1",[t._v("Subtitle Player")]),r("FileUpload",{on:{scriptLoaded:t.scriptLoaded}}),r("Player",{attrs:{id:"player",scripts:t.scripts}}),t._m(0),r("div",{attrs:{id:"padding"}})],1)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a",{attrs:{href:"https://github.com/asvrada/vue-subtitle-player"}},[r("img",{staticStyle:{position:"absolute",top:"0",right:"0",border:"0"},attrs:{src:"https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png",alt:"Fork me on GitHub"}})])}],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("drop-zone",{attrs:{id:"drop-zone"},on:{fileUploaded:t.onFileUpload}}),r("button",{attrs:{id:"btn_demo"},on:{click:t.loadDemo}},[t._v("Load Demo")])],1)},o=[],l=(r("d3b7"),r("99af"),r("caad"),r("b0c0"),r("b64b"),r("ac1f"),r("2532"),r("1276"),r("9e36")),c=r("efde"),u=r("acf9");function p(t){return new Promise((function(e,r){var n={srt:d,txt:m},i=null;try{var a=t.name.split(".");i=a[a.length-1].toLowerCase()}catch(o){throw"Illegal file name "+t.name}if(!Object.keys(n).includes(i))throw"".concat(i," format is not supported\nSupported files are: ").concat(Object.keys(n));var s=new FileReader;s.onload=function(a){try{var s=a.target.result,l=c["detect"](s),p=u["decode"](s,l["encoding"]),d=n[i](p);e({scripts:d,name:t.name})}catch(o){r(o)}},s.readAsBinaryString(t)}))}function d(t){var e=l["fromSrt"](t,!0);return e}function m(t){var e=t.split(/(?:\r\n)|(?:\r)|(?:\n)/g);return e}var h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.promptDrop,expression:"promptDrop"}],attrs:{id:"cover-fullscreen"},on:{drop:function(e){return e.stopPropagation(),e.preventDefault(),t.handleDrop(e)},dragover:function(t){t.stopPropagation(),t.preventDefault()}}},[t._v(" release to drop your file ")]),r("div",{staticClass:"full-size",style:t.styleObjectApp,attrs:{id:"drop-zone"},on:{click:t.promptSelectFile}},[r("div",{staticClass:"full-size",attrs:{id:"div-prompt"}},[r(t.currentComponent,{tag:"component",attrs:{id:"area-icon"}})],1),r("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"form-file-upload"},[r("input",{attrs:{type:"file",id:"elem-file"},on:{change:t.handleForm}}),r("label",{ref:"btn_form",staticClass:"button",attrs:{for:"elem-file"}},[t._v("Select subtitle file")])])])])},f=[],v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 172 157.566"}},[r("g",{attrs:{id:"Group_2","data-name":"Group 2",transform:"translate(-180 -164.435)"}},[r("path",{staticClass:"cls-1",attrs:{id:"Subtraction_1","data-name":"Subtraction 1",d:"M-1947-130.813h-172V-179h17.4v34.8h137.867V-179H-1947v48.187Z",transform:"translate(2299 452.814)"}}),r("line",{staticClass:"cls-2",attrs:{id:"Line_1","data-name":"Line 1",x2:"1",y2:"115",transform:"translate(265.5 164.5)"}}),r("line",{staticClass:"cls-2",attrs:{id:"Line_3","data-name":"Line 3",x2:"43",y2:"45",transform:"translate(228.5 236.5)"}}),r("line",{staticClass:"cls-2",attrs:{id:"Line_4","data-name":"Line 4",x1:"44",y2:"45",transform:"translate(261.5 236.5)"}})])])])},y=[],_={name:"iconInit"},b=_,g=(r("7649"),r("2877")),w=Object(g["a"])(b,v,y,!1,null,"615474fc",null),S=w.exports,x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 145.532 145.532"}},[r("path",{staticClass:"cls-1",attrs:{id:"Exclusion_1","data-name":"Exclusion 1",d:"M-2046.234-52.468a72.312,72.312,0,0,1-28.324-5.718,72.762,72.762,0,0,1-12.36-6.709,73.3,73.3,0,0,1-10.769-8.885,73.293,73.293,0,0,1-8.885-10.769,72.737,72.737,0,0,1-6.709-12.36A72.314,72.314,0,0,1-2119-125.234a72.314,72.314,0,0,1,5.718-28.324,72.733,72.733,0,0,1,6.709-12.36,73.292,73.292,0,0,1,8.885-10.769,73.3,73.3,0,0,1,10.769-8.885,72.763,72.763,0,0,1,12.36-6.709A72.312,72.312,0,0,1-2046.234-198a72.309,72.309,0,0,1,28.324,5.718,72.765,72.765,0,0,1,12.361,6.709,73.3,73.3,0,0,1,10.769,8.885,73.3,73.3,0,0,1,8.885,10.769,72.765,72.765,0,0,1,6.709,12.36,72.309,72.309,0,0,1,5.718,28.324,72.309,72.309,0,0,1-5.718,28.324,72.768,72.768,0,0,1-6.709,12.36,73.3,73.3,0,0,1-8.885,10.769A73.3,73.3,0,0,1-2005.55-64.9a72.773,72.773,0,0,1-12.361,6.709A72.309,72.309,0,0,1-2046.234-52.468Zm0-118.582a45.523,45.523,0,0,0-17.833,3.6,45.663,45.663,0,0,0-14.563,9.819,45.671,45.671,0,0,0-9.819,14.563,45.535,45.535,0,0,0-3.6,17.833,45.535,45.535,0,0,0,3.6,17.833,45.671,45.671,0,0,0,9.819,14.563,45.663,45.663,0,0,0,14.563,9.819,45.523,45.523,0,0,0,17.833,3.6,45.524,45.524,0,0,0,17.833-3.6,45.656,45.656,0,0,0,14.563-9.819,45.659,45.659,0,0,0,9.818-14.563,45.527,45.527,0,0,0,3.6-17.833,45.527,45.527,0,0,0-3.6-17.833,45.658,45.658,0,0,0-9.818-14.563,45.656,45.656,0,0,0-14.563-9.819A45.523,45.523,0,0,0-2046.234-171.05Z",transform:"translate(2119 198)"}})])])},C=[],T={name:"icon-selected"},I=T,P=(r("2744"),Object(g["a"])(I,x,C,!1,null,"32c64e34",null)),M=P.exports,k={name:"drop-zone",components:{IconInit:S,IconSelected:M},mounted:function(){var t=this,e=null;window.addEventListener("dragenter",(function(r){r.preventDefault(),r.stopPropagation(),e=r.target,t.handleDragEnter()})),window.addEventListener("dragleave",(function(r){r.stopPropagation(),r.preventDefault(),r.target!==e&&r.target!==document||t.handleDragLeave()}))},data:function(){return{fileLoaded:null,promptDrop:!1,color:{init:"#303F9F",drop:"#FFA000",loaded:"#689F38"}}},computed:{currentState:function(){return null!==this.fileLoaded?"loaded":"init"},styleObjectApp:function(){var t=this.currentState;return{"background-color":"".concat(this.color[t])}},currentComponent:function(){return{init:"IconInit",loaded:"IconSelected",drop:"IconSelected"}[this.currentState]}},methods:{handleDragEnter:function(){this.promptDrop=!0},handleDragLeave:function(){this.promptDrop=!1},handleDrop:function(t){var e=null;try{var r=t.dataTransfer;e=r.files}catch(t){alert("There was a problem processing your file, please try again")}this.handleFiles(e)},handleForm:function(t){var e=null;try{var r=t.target;e=r.files}catch(t){alert("There was a problem processing your file, please try again")}this.handleFiles(e)},handleFiles:function(t){this.fileLoaded=t,this.promptDrop=!1,this.$emit("fileUploaded",t)},promptSelectFile:function(){this.$refs.btn_form.click()}}},D=k,E=(r("0df1"),Object(g["a"])(D,h,f,!1,null,"51262118",null)),A=E.exports,L={name:"FileUpload",components:{DropZone:A},methods:{loadDemo:function(){var t=this,e="./demo_martian.srt";fetch(e).then((function(e){e.text().then((function(e){var r=l["fromSrt"](e,!0);t.$emit("scriptLoaded",{scripts:r,name:"demo_martian.srt"})}))}))},onFileUpload:function(t){t=t[0];var e=this;p(t).then((function(t){e.$emit("scriptLoaded",t)})).catch((function(t){alert(t)}))}}},j=L,O=(r("1166"),Object(g["a"])(j,s,o,!1,null,"9f12fa04",null)),N=O.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:"EMPTY"!==t.player.state,expression:"player.state !== 'EMPTY'"}],attrs:{id:"player"}},[r("div",{staticClass:"row",attrs:{id:"area-title"}},[t._v("PLAYING: "),r("span",[t._v(" "+t._s(t.title)+" ")])]),r("div",{staticClass:"row",attrs:{id:"area-time"}},[r("div",{staticClass:"container"},[r("div",{attrs:{id:"timestamp"},on:{dblclick:t.handleDoubleClickTimestamp}},[r("i",{staticClass:"fas fa-sliders-h",attrs:{id:"btn_set_timestamp"},on:{click:t.handleDoubleClickTimestamp}}),t._v(" "+t._s(t.cur_hour)+":"+t._s(t.cur_min)+t._s(t.time_indicator)+t._s(t.cur_sec)+" / "+t._s(t.max_hour)+":"+t._s(t.max_min)+":"+t._s(t.max_sec)+" ")]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showTimeInput,expression:"showTimeInput"}],attrs:{id:"edit-timestamp"}},[t._m(0),r("input",{directives:[{name:"model",rawName:"v-model",value:t.modelTimestamp,expression:"modelTimestamp"}],attrs:{id:"time-input",placeholder:"hh:mm:ss"},domProps:{value:t.modelTimestamp},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitTimestamp(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handleDoubleClickTimestamp(e)}],input:function(e){e.target.composing||(t.modelTimestamp=e.target.value)}}}),r("div",[r("button",{staticClass:"btn",attrs:{id:"btn_jumpto"},on:{click:t.submitTimestamp}},[t._v("Jump to")]),r("button",{staticClass:"btn",attrs:{id:"btn_cancel"},on:{click:t.handleDoubleClickTimestamp}},[t._v("Cancel")])])]),r("div",{attrs:{id:"range-input"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.sliderCurComputed,expression:"sliderCurComputed"}],staticClass:"slider",attrs:{type:"range",min:"0",max:t.slider_max_val},domProps:{value:t.sliderCurComputed},on:{input:t.onSliderInput,change:t.onSliderChange,__r:function(e){t.sliderCurComputed=e.target.value}}})])])]),r("div",{staticClass:"row",attrs:{id:"area-controls"}},[r("button",{directives:[{name:"show",rawName:"v-show",value:"PAUSE"===t.player.state,expression:"player.state === 'PAUSE'"}],staticClass:"btn",attrs:{id:"btn_play"},on:{click:t.play}},[t._v(" Play ")]),r("button",{directives:[{name:"show",rawName:"v-show",value:"PLAYING"===t.player.state,expression:"player.state === 'PLAYING'"}],staticClass:"btn",attrs:{id:"btn_pause"},on:{click:t.pause}},[t._v(" Pause ")])]),r("div",{staticClass:"row",attrs:{id:"area-subtitles"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!!t.player.curScript,expression:"!!player.curScript"}],attrs:{id:"subtitle-wrapper"}},[r("p",[t._v(t._s(t.player.curScript?t.player.curScript.text:""))])])])])},G=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",[t._v("Input Format: "),r("span",{staticClass:"timeformat"},[t._v("hh:mm:ss")]),t._v(" or "),r("span",{staticClass:"timeformat"},[t._v("mm:ss")])])}],U=(r("25f0"),{padZero:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=t.toString();while(t.length<e)t="0"+t;return t},convertToMillisec:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return t=parseInt(t),e=parseInt(e)%60,r=parseInt(r)%60,n=parseInt(n)%1e3,36e5*t+6e4*e+1e3*r+n},getHours:function(t){return Math.floor(t/36e5)},getMinutes:function(t){return Math.floor(t/6e4)%60},getSeconds:function(t){return Math.floor(t/1e3)%60},getMilliseconds:function(t){return t%1e3}}),Y=r("d4ec"),$=r("bee2"),Z={EMPTY:"EMPTY",PAUSE:"PAUSE",PLAYING:"PLAYING",CHANGING:"CHANGING"},z=function(){function t(){Object(Y["a"])(this,t),this.INTERVAL_SPEED=241,this.scripts=null,this.state=Z.EMPTY,this.maxMillSec=null,this.jobID=null,this.beginPlayTime=null,this.resumeTime=null,this.cur=null,this.curIndex=null,this.curScript=null}return Object($["a"])(t,[{key:"load",value:function(t){this.reset(),this.scripts=t,this.state=Z.PAUSE,this.maxMillSec=t[t.length-1]["endTime"],this.cur=0,this.curIndex=0}},{key:"reset",value:function(){this.state=Z.EMPTY,this.scripts=null,this.jobID&&(clearInterval(this.jobID),this.jobID=null),this.beginPlayTime=null,this.resumeTime=null,this.maxMillSec=null,this.cur=null,this.curIndex=null,this.curScript=null}},{key:"play",value:function(){if(this.state!==Z.PLAYING){if(this.jobID)throw"Can't play when already playing";this.state=Z.PLAYING,this.beginPlayTime=new Date,this.resumeTime=this.resumeTime||0;var t=this;this.jobID=setInterval((function(){t.cur=new Date-t.beginPlayTime+t.resumeTime,t.cur>=t.maxMillSec&&(t.cur=t.maxMillSec,t.pause()),t.curScript=t.getCurScript()}),this.INTERVAL_SPEED)}}},{key:"pause",value:function(){if(this.state!==Z.PAUSE){if(this.state=Z.PAUSE,!this.jobID)throw"Already paused";clearInterval(this.jobID),this.jobID=null,this.resumeTime=this.cur}}},{key:"moveCursorTo",value:function(t){this.pause(),t=t>this.maxMillSec?this.maxMillSec:t,this.resumeTime=t,this.curIndex=0,this.cur=t,this.curScript=this.getCurScript()}},{key:"getCurScript",value:function(){if(this.state===Z.EMPTY||null===this.cur)return null;var t=this.curIndex;while(this.scripts[t].endTime<this.cur)if(t+=1,t>=this.scripts.length)return null;return this.curIndex=t,this.cur<this.scripts[this.curIndex].startTime?null:this.scripts[this.curIndex]}}]),t}(),H={name:"Player",props:["scripts"],watch:{scripts:function(t){var e=t.scripts,r=t.name;this.player.load(e),this.title=r}},mounted:function(){var t=this;window.addEventListener("keydown",(function(e){t.handleKeydown(e)}))},data:function(){return{title:"",player:new z,showTimeInput:!1,modelTimestamp:"",currentCursor:0,sliderStep:500}},methods:{play:function(){this.player.play()},pause:function(){this.player.pause()},handleKeydown:function(t){if(!this.showTimeInput){var e=t.key,r=[" ","ArrowLeft","ArrowRight"];if(r.includes(e)){var n=this,i={" ":function(){"PAUSE"===n.player.state?n.play():"PLAYING"===n.player.state&&n.pause()},ArrowLeft:function(){},ArrowRight:function(){}};i[e](),t.stopPropagation(),t.preventDefault()}}},handleDoubleClickTimestamp:function(){this.showTimeInput||(this.pause(),this.modelTimestamp=this.cur_hour+":"+this.cur_min+":"+this.cur_sec),this.showTimeInput=!this.showTimeInput},submitTimestamp:function(){var t=this.modelTimestamp,e=/^(?:(\d{0,2}):)?(\d{0,2}):(\d{0,2})(?:,(\d{0,3}))?$/,r=e.exec(t);if(null===r)return this.modelTimestamp=this.cur_hour+":"+this.cur_min+":"+this.cur_sec,void alert("Un-acceptable input format: ".concat(t,"\nPlease fix and try again"));this.showTimeInput=!1,this.player.pause();var n=U.convertToMillisec(r[1],r[2],r[3],r[4]);this.player.moveCursorTo(n)},onSliderInput:function(){this.player.moveCursorTo(this.currentCursor)},onSliderChange:function(){this.player.moveCursorTo(this.currentCursor)}},computed:{slider_max_val:function(){return this.sliderStep},cur_hour:function(){return U.padZero(U.getHours(this.player.cur),2)},cur_min:function(){return U.padZero(U.getMinutes(this.player.cur),2)},cur_sec:function(){return U.padZero(U.getSeconds(this.player.cur),2)},cur_mill:function(){return U.padZero(U.getMilliseconds(this.player.cur),3)},max_hour:function(){return U.padZero(U.getHours(this.player.maxMillSec),2)},max_min:function(){return U.padZero(U.getMinutes(this.player.maxMillSec),2)},max_sec:function(){return U.padZero(U.getSeconds(this.player.maxMillSec),2)},max_mill:function(){return U.padZero(U.getMilliseconds(this.player.maxMillSec),3)},time_indicator:function(){if("PLAYING"!==this.player.state)return":";var t=500;return Math.floor(this.player.cur%(2*t)/t)?" ":":"},sliderCurComputed:{get:function(){var t=this.player.maxMillSec,e=this.player.cur||0;return e=Math.floor(e/t*this.sliderStep),e.toString()},set:function(t){var e=this.player.maxMillSec,r=parseInt(t);r=Math.floor(r/this.sliderStep*e),this.currentCursor=r}}}},R=H,V=(r("74c9"),Object(g["a"])(R,F,G,!1,null,null,null)),B=V.exports,J={name:"app",components:{Player:B,FileUpload:N},data:function(){return{scripts:null}},methods:{scriptLoaded:function(t){this.scripts=t}}},K=J,q=(r("5c0b"),Object(g["a"])(K,i,a,!1,null,null,null)),Q=q.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(Q)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var n=r("9c0c"),i=r.n(n);i.a},"74c9":function(t,e,r){"use strict";var n=r("9fd8"),i=r.n(n);i.a},7649:function(t,e,r){"use strict";var n=r("b007"),i=r.n(n);i.a},"9c0c":function(t,e,r){},"9fd8":function(t,e,r){},b007:function(t,e,r){},c737:function(t,e,r){},c7fd:function(t,e,r){},d27e:function(t,e,r){}});
//# sourceMappingURL=app.1b1deae4.js.map